name: Build Mac App (naver_blank2)

on:
  push:
    tags:
      - 'v*' # v1.0, v2.0 등 태그를 push하면 빌드 시작

jobs:
  build-mac:
    runs-on: macos-latest
    
    steps:
    - name: 코드를 가져옵니다
      uses: actions/checkout@v3

    - name: 파이썬을 설정합니다 (3.10)
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: 필요한 라이브러리를 설치합니다
      run: |
        pip install --upgrade pip
        pip install pyinstaller selenium pandas openpyxl

    - name: Mac 실행파일 빌드 (naver_blank2)
      run: |
        # --windowed: GUI 프로그램용 (터미널 안 뜸)
        # --onefile: 단일 실행파일로 생성
        # --name: 실행파일 이름을 naver_blank2로 지정
        pyinstaller --noconfirm --windowed --onefile --name "naver_blank2" naver_blank2.py

    - name: 빌드된 파일 압축 및 업로드
      uses: actions/upload-artifact@v3
      with:
        name: naver_blank2_Mac_App # 다운로드 시 보일 압축파일명
        path: dist/naver_blank2 # 빌드된 파일 경로
